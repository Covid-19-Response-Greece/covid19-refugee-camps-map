{"version":3,"sources":["webpack:///./src/components/Charten.jsx","webpack:///./src/components/CampPickeren.jsx","webpack:///./src/pages/chartsen.js"],"names":["Chart","data","selectedCamp","useState","selectedCampData","setselectedCampData","weeklyData","setweeklyData","useEffect","cases","map","camp","name_en","recorded_events","forEach","event","confirmed_cases","push","case_detection_week","filter","weekly_case","array","length","item","str","split","newStr","moment","format","recorded_events_edited","Object","values","concat","reduce","a","String","Number","sort","b","date1","date2","barChart","options","title","display","text","labels","datasets","label","borderColor","fill","style","marginBottom","lineChart","className","Camps","camps","handleCampChange","FormControl","NativeSelect","defaultValue","onChange","e","target","value","i","key","SixthPage","state","setState","componentDidMount","fetchData","this","render","totalcases","currentTotal","total_confirmed_cases","console","log","Typography","color","href","class","src","alt","width","height","Button","border-radius","role","aria-label","aria-pressed","Footer","React","Component"],"mappings":"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","file":"component---src-pages-chartsen-js-97e4671590e0d514f8a1.js","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { Line, Bar } from \"react-chartjs-2\";\nimport moment from \"moment\";\nimport '../assets/stylesheets/components/_chart.scss';\n\n\nconst Chart = ({ data, selectedCamp }) => {\n  const [selectedCampData, setselectedCampData] = useState([]);\n  const [weeklyData, setweeklyData] = useState([]);\n\n  useEffect(() => {\n    let cases = [];\n\n    if (selectedCamp) {\n      let selectedData = data.map((camp) => {\n        if (camp.name_en === selectedCamp) {\n          camp.recorded_events.forEach((event) => {\n            if (event.confirmed_cases) {\n              cases.push({\n                case_detection_week: event.case_detection_week,\n                confirmed_cases: event.confirmed_cases,\n              });\n            }\n          });\n        }\n      });\n      setselectedCampData(cases);\n    } else {\n      let recorded_events = data\n        .map(({ recorded_events }) => {\n          const cases = recorded_events.filter((weekly_case) => {\n            if (\n              !weekly_case.case_detection_week ||\n              !weekly_case.confirmed_cases\n            )\n              return false;\n            return true;\n          });\n          return cases;\n        })\n        .map((array) => {\n          if (array.length > 0) return array;\n        })\n        .filter((array) => {\n          if (array) return true;\n          return false;\n        });\n\n      recorded_events.forEach((event) => {\n        event.forEach((item) => {\n          let case_detection_week = item.case_detection_week;\n          let str = case_detection_week.split(\"-\");\n          const newStr =\n            moment(str[0], \"DD/MM/YYYY\").format(\"DD/MM/YYYY\") +\n            \" - \" +\n            moment(str[1], \"DD/MM/YYYY\").format(\"DD/MM/YYYY\");\n          item.case_detection_week = newStr;\n        });\n      });\n      //remove zero length arrays\n      // const recorded_events_edited = Object.values(recorded_events.reduce((a, b) => { a[b.case_detection_week] = Object.assign(a[b.case_detection_week] || {}, b); return a; }, {}));\n      const recorded_events_edited = Object.values(\n        []\n          .concat(...recorded_events)\n          .reduce((a, { case_detection_week, confirmed_cases }) => {\n            a[case_detection_week] = a[case_detection_week] || {\n              case_detection_week,\n              confirmed_cases: 0,\n            };\n            a[case_detection_week].confirmed_cases = String(\n              Number(a[case_detection_week].confirmed_cases) +\n                Number(confirmed_cases)\n            );\n            return a;\n          }, {})\n      );\n\n      // recorded_events_edited.sort((a, b) => a.case_detection_week.localeCompare(b.case_detection_week));\n\n      recorded_events_edited.sort(function (a, b) {\n        let date1 = a.case_detection_week.split(\"-\")[0];\n        let date2 = b.case_detection_week.split(\"-\")[0];\n        return moment(date1, \"DD/MM/YYYY\") - moment(date2, \"DD/MM/YYYY\");\n      });\n      setweeklyData(recorded_events_edited);\n    }\n  }, [data, selectedCamp]);\n\n  const barChart = selectedCampData[0] ? (\n    <Line\n      options={{\n        title: {\n          display: true,\n          text: `Confirmed cases of ${selectedCamp} Refugees Camp` ,\n        },\n      }}\n      data={{\n        labels: selectedCampData.map(\n          ({ case_detection_week }) => case_detection_week\n        ),\n        datasets: [\n          {\n            data: selectedCampData.map((data) => data.confirmed_cases),\n            label: \"Covid19 Confirmed Cases Curve\",\n            borderColor: \"rgba(255, 0, 0, 0.5)\",\n            fill: true,\n          },\n        ],\n      }}\n    />\n  ) : (\n    <span style={{ marginBottom: \"35px\" }}>\n      There are no recorded cases in {selectedCamp}'s Camp.\n    </span>\n  );\n\n  const lineChart = weeklyData[0] ? (\n    <Line\n      options={{\n        title: {\n          display: true,\n          text: \"Total Covid19 Confirmed Cases\",\n        },\n      }}\n      data={{\n        labels: weeklyData.map(\n          ({ case_detection_week }) => case_detection_week\n        ),\n        datasets: [\n          {\n            data: weeklyData.map((data) => data.confirmed_cases),\n            label: \"Covid19 Confirmed Cases Curve\",\n            borderColor: \"red\",\n            fill: true,\n          },\n        ],\n      }}\n    />\n  ) : null;\n\n  return (\n    <>\n      <div className=\"chart\">\n        {selectedCamp ? barChart : lineChart}\n      </div>\n      {selectedCamp && selectedCampData[0] ? (\n        <h4>Weekly COVID19 Cases Distribution</h4>\n      ) : null}\n      {!selectedCamp && <h4>Weekly COVID19 Cases Distribution</h4>}\n    </>\n  );\n};\n\nexport default Chart;","import React from 'react';\nimport { NativeSelect, FormControl } from '@material-ui/core';\nimport '../assets/stylesheets/components/_camppicker.scss';\n\nconst Camps = ({ camps, handleCampChange }) => {\n  return (\n    <FormControl className=\"camppicker\">\n      <NativeSelect defaultValue=\"\" onChange={(e) => handleCampChange(e.target.value)}>\n        <option value=\"\">Choose Refugee Camp</option>\n        {camps.map((camp, i) => <option key={i} value={camp}>{camp}</option>)}\n      </NativeSelect>\n    </FormControl>\n  );\n};\n\nexport default Camps;","import React from \"react\";\nimport Chart from \"components/Charten\";\nimport CampPicker from \"components/CampPickeren\"\nimport Footer from \"components/Footer\"\nimport { Typography } from '@material-ui/core';\nimport { fetchData } from \"hooks/fetchData\";\nimport '../assets/stylesheets/pages/_charts.scss';\nimport { Button } from 'reactstrap';\n\n\nclass SixthPage extends React.Component {\n  state = {\n    data: [],\n    selectedCamp: \"\",\n    camps: [],\n  };\n\n  async componentDidMount() {\n    \n\n    const data = await fetchData();\n    const camps = data.map((camp) => camp.name_en);\n    \n    this.setState({ data, camps });\n  }\n\n  handleCampChange = async (selectedCamp) => {\n    this.setState({ selectedCamp });\n  };\n\n  render() {\n    const { data, camps, selectedCamp } = this.state;\n\n    const totalcases = data.reduce((currentTotal, data) => {\n      return data.total_confirmed_cases + currentTotal\n    }, 0)\n    console.log(totalcases);\n\n    return (\n      <div className=\"charts\">\n        <div className=\"charts-container_outer\">\n          <div className=\"charts-container\">\n\n            <Typography color='textSecondary'>\n            <div>\n              <a href=\"/\"><img class=\"alignleft\" src=\"https://devpap.co.uk/wp-content/uploads/2020/07/icon1.png\" alt=\"\" width=\"22\" height=\"22\" /></a><a href=\"/indexen\">   Camps Information Map        </a>\n              <Button color=\"info\" border-radius= \"20\" href=\"/informationen/\">ABOUT</Button>\n              <div class=\"btn-group\" role=\"group\" aria-label=\"GR-EN\">\n          <a href=\"/charts\" class=\"btn btn-secondary btn-sm active\" role=\"button\" aria-pressed=\"true\">GR</a>\n          <a href=\"/chartsen\" class=\"btn btn-secondary btn-sm\" role=\"button\" aria-pressed=\"true\">EN</a>\n          </div>\n            </div>\n            </Typography>\n            <h4>TOTAL CONFIRMED COVID19 CASES IN ALL CAMPS: <a href=\"/covid19campsen/\" class=\"badge-pill badge badge-danger\"> {totalcases}</a></h4>\n            <h6>COVID19 incidents by Refugees Camp</h6>\n            <CampPicker camps={camps} handleCampChange={this.handleCampChange} />\n            \n            <Chart\n              selectedCamp={selectedCamp}\n              data={data}\n            />\n          </div>\n          <Footer />\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default SixthPage;\n"],"sourceRoot":""}