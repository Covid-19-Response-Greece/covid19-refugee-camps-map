{"version":3,"sources":["webpack:///./src/pages/index.js"],"names":["CENTER","IndexPage","React","useState","data","setdata","filter","setfilter","map","leafletElement","Array","isArray","length","geoJson","type","features","element","total_confirmed_cases","region","lat","latitude","lng","longtitude","properties","geometry","coordinates","L","GeoJSON","pointToLayer","feature","latlng","casesString","capacity","lastupdate","description","name_gr","region_gr","total_samples","slice","html","marker","icon","divIcon","className","riseOnHover","addTo","useEffect","response","axios","get","fetchData","mapSettings","center","defaultBaseMap","zoom","mapEffect","zoomSnap","zoomDelta","setMappingFilter","pageName"],"mappings":"2OAYMA,EAAS,CAHR,UACA,UAuIQC,UAlIG,WAAO,IAAD,EACEC,IAAMC,SAAS,IAAhCC,EADe,KACTC,EADS,OAEMH,IAAMC,UAAS,GAApCG,EAFe,KAEPC,EAFO,wCActB,aAAwD,IAAbC,QAAY,MAAJ,GAAI,GAA5BC,eAGzB,GADgBC,MAAMC,QAAQP,IAASA,EAAKQ,QAAU,EACtD,CACA,IAAMC,EAAU,CACdC,KAAM,oBACNC,SAAUX,EACPE,QAAO,SAACU,GACP,OAAsC,IAAlCA,EAAQC,wBAA0C,IAAXX,KAI5CE,KAAI,SAACU,QAAgB,IAAhBA,MAAS,IAAO,MACuBA,EAAzBC,EADE,EACZC,SAA2BC,EADf,EACGC,WACvB,MAAO,CACLR,KAAM,UACNS,WAAW,OAAD,UACLL,GAELM,SAAU,CACRV,KAAM,QACNW,YAAa,CAACJ,EAAKF,SAMP,IAAIO,IAAEC,QAAQd,EAAS,CAC3Ce,aAAc,SAACC,EAAcC,QAAW,IAAzBD,MAAU,IAAe,IAElCE,EAFkC,EACVF,EAApBN,kBAD8B,MACjB,GADiB,EAKpCS,EAOET,EAPFS,SACeC,EAMbV,EANF,eACAW,EAKEX,EALFW,YACAC,EAIEZ,EAJFY,QACAC,EAGEb,EAHFa,UACAnB,EAEEM,EAFFN,sBACAoB,EACEd,EADFc,cAGFN,EAAW,GAAMC,EAEbA,EAAW,MACbD,EAAgBA,EAAYO,MAAM,GAAI,GAA3B,MAGb,IAAMC,EAAI,mHAGQJ,EAHR,4BAIEC,EAJF,+EAMiCJ,EANjC,4DAOkCK,EAPlC,gEAQsCpB,EARtC,qDAS2BiB,EAT3B,yEAU0CD,EAV1C,gEAaJE,EAbI,gCAiBV,OAAOT,IAAEc,OAAOV,EAAQ,CACtBW,KAAMf,IAAEgB,QAAQ,CACdC,UAAW,OACXJ,SAEFK,aAAa,OAKLC,MAAMrC,QAzFA,sBAGtBN,IAAM4C,WAAU,WAAM,mCACpB,YACE,IAAMC,QAAiBC,IAAMC,IAC3B,uDAEF5C,EAAQ0C,EAAS3C,KAAK,sBALJ,uBAAC,WAAD,wBAOpB8C,KACC,IAiFH,IAAMC,EAAc,CAClBC,OAAQpD,EACRqD,eAAgB,gBAChBC,KAjGiB,KAkGjBC,UAhGoB,4CAiGpBC,SAAU,IACVC,UAAW,IAGPC,EAAmB,WACvBnD,GAAWD,IAGb,OACE,kBAAC,IAAD,CAAQqD,SAAS,QACf,kBAAC,IAAD,KACE,2EAEDrD,GAAU,kBAAC,IAAD,iBAAS6C,EAAT,CAAsB5C,UAAWmD,MAC1CpD,GAAU,kBAAC,IAAD,iBAAS6C,EAAT,CAAsB5C,UAAWmD,KAE7C,kBAAC,IAAD,CAAW5C,KAAK,UAAU6B,UAAU,cAClC,0EAGA,8BACA,4CAAiB,6BAAjB,iCAC8B,6BAD9B,wCAEqC,6BAFrC,gCAG6B,6BAH7B,kFAMA,uBAAGA,UAAU,QAAb","file":"component---src-pages-index-js-fd2a264bc68b3b4024ac.js","sourcesContent":["import React from \"react\";\nimport Helmet from \"react-helmet\";\nimport L, { point } from \"leaflet\";\nimport axios from \"axios\";\nimport Layout from \"components/Layout\";\nimport Container from \"components/Container\";\nimport Map from \"components/Map\";\n\nconst LOCATION = {\n  lat: 38.814566,\n  lng: 23.06738,\n};\nconst CENTER = [LOCATION.lat, LOCATION.lng];\nconst DEFAULT_ZOOM = 6.75;\n\nconst IndexPage = () => {\n  const [data, setdata] = React.useState([]);\n  const [filter, setfilter] = React.useState(false);\n  React.useEffect(() => {\n    async function fetchData() {\n      const response = await axios.get(\n        \"https://covid-19-greece.herokuapp.com/refugee-camps\"\n      );\n      setdata(response.data[\"refugee-camps\"]);\n    }\n    fetchData();\n  }, []);\n\n\n  async function mapEffect({ leafletElement: map } = {}) {\n\n    const hasData = Array.isArray(data) && data.length >= 0;\n    if (!hasData) return;\n    const geoJson = {\n      type: \"FeatureCollection\",\n      features: data\n        .filter((element) => {\n          if (element.total_confirmed_cases === 0 && filter === true)\n            return false;\n          return true;\n        })\n        .map((region = {}) => {\n          const { latitude: lat, longtitude: lng } = region;\n          return {\n            type: \"Feature\",\n            properties: {\n              ...region,\n            },\n            geometry: {\n              type: \"Point\",\n              coordinates: [lng, lat],\n            },\n          };\n        }),\n    };\n\n    const geoJsonLayers = new L.GeoJSON(geoJson, {\n      pointToLayer: (feature = {}, latlng) => {\n        const { properties = {} } = feature;\n        let casesString;\n\n        const {\n          capacity,\n          \"last update\": lastupdate,\n          description,\n          name_gr,\n          region_gr,\n          total_confirmed_cases,\n          total_samples,\n        } = properties;\n\n        casesString = `${capacity}`;\n\n        if (capacity > 1000) {\n          casesString= `${casesString.slice(0, -3)}χ+`;\n        }\n\n        const html = `\n          <span class=\"icon-marker\">\n            <span class=\"icon-marker-tooltip\">\n              <h3> Camp ${name_gr}</h3>\n              <h3>${region_gr}</h3>\n              <ul>\n              <li><strong>Χωρητικότητα:</strong> ${capacity}</li>\n              <li><strong>Αριθμός Tests:</strong> ${total_samples}</li>\n              <li><strong>Κρούσματα COVID19:</strong> ${total_confirmed_cases}</li>\n                <li><i><h2>Camp info:</h2> ${description} </i></li>\n                <li><strong>Τελευταία ενημέρωση:</strong> ${lastupdate}</li>\n              </ul>\n            </span>\n            ${name_gr}\n          </span>\n        `;\n\n        return L.marker(latlng, {\n          icon: L.divIcon({\n            className: \"icon\",\n            html\n          }),\n          riseOnHover: true\n        });\n      },\n    });\n\n    geoJsonLayers.addTo(map);\n  }\n\n  const mapSettings = {\n    center: CENTER,\n    defaultBaseMap: \"OpenStreetMap\",\n    zoom: DEFAULT_ZOOM,\n    mapEffect,\n    zoomSnap: 0.25,\n    zoomDelta: 0.5,\n  };\n\n  const setMappingFilter = () => {\n    setfilter(!filter);\n  };\n\n  return (\n    <Layout pageName=\"home\">\n      <Helmet>\n        <title>COVID19 ΣΤΙΣ ΔΟΜΕΣ ΦΙΛΟΞΕΝΙΑΣ ΠΡΟΣΦΥΓΩΝ</title>\n      </Helmet>\n      {filter && <Map {...mapSettings} setfilter={setMappingFilter} />}\n      {!filter && <Map {...mapSettings} setfilter={setMappingFilter} />}\n\n      <Container type=\"content\" className=\"home-start\">\n        <h2>\n        ΣΤΑΤΙΣΤΙΚΑ ΣΤΙΣ ΔΟΜΕΣ ΦΙΛΟΞΕΝΙΑΣ ΠΡΟΣΦΥΓΩΝ\n        </h2>\n        <pre></pre>\n        <p>Περιλαμβάνει: <br></br>\n        Eξέλιξη των Covid19 κρουσμάτων<br></br>\n        Αριθμός Covid19 Tests που έχουν γίνει<br></br>\n        Χωρητικότητα Δομής Φιλοξενίας<br></br>\n        Στατιστικά γραφήματα με ημερολογιακή καταγραφή των κρουσμάτων COVID19 ανα δομή\n        </p>\n        <p className=\"note\">Πηγές DATA: Covid19 Response Greece | Data provided by National & Kapodistrian University via Coronovirus Greece Api </p>\n      </Container>\n    </Layout>\n  );\n};\n\nexport default IndexPage;\n"],"sourceRoot":""}